<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso - Premium Phone Accessories</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <style>
        /* Base styles from provided CSS */
        html,
        body {
            height: 100%;
        }

        body {
            display: flex;
            flex-direction: column;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        main {
            flex: 1 0 auto;
        }

        footer {
            flex-shrink: 0;
            margin-left: 0 !important;
            margin-right: 0 !important;
            width: 100%;
        }

        .footer-content {
            max-width: 1100px;
            margin: 0 auto;
            padding: 24px;
        }

        .page {
            max-width: 1100px;
            margin-inline: auto;
            padding: 24px
        }

        .card-shadow {
            box-shadow: 0 6px 18px rgba(0, 0, 0, .06);
            border: 0
        }

        .bundle-box {
            background: #f7f7f8;
            border: 2px solid #e5e7eb;
            border-radius: 12px
        }

        .visually-hidden {
            position: absolute !important;
            clip: rect(1px, 1px, 1px, 1px);
            padding: 0;
            border: 0;
            height: 1px;
            width: 1px;
            overflow: hidden;
            white-space: nowrap
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 300px;
        }

        .item-image {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #e9ecef 25%, #f8f9fa 25%, #f8f9fa 50%, #e9ecef 50%, #e9ecef 75%, #f8f9fa 75%);
            background-size: 8px 8px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #6c757d;
        }

        /* Acceso Brand Colors */
        :root {
            --acceso-primary: #007bff;
            --acceso-secondary: #6c757d;
            --acceso-light: #f8f9fa;
            --acceso-dark: #343a40;
            --acceso-success: #28a745;
            --acceso-danger: #dc3545;
            --acceso-warning: #ffc107;
        }

        /* Navigation Styles */
        .navbar {
            background: white !important;
            border-bottom: 1px solid #e9ecef;
            padding: 1rem 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .navbar-brand {
            font-weight: 700;
            color: var(--acceso-dark) !important;
            font-size: 1.5rem;
        }

        .nav-link {
            color: var(--acceso-dark) !important;
            font-weight: 500;
            padding: 0.5rem 1rem !important;
            margin: 0 0.25rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .nav-link:hover,
        .nav-link.active {
            background-color: var(--acceso-light);
            color: var(--acceso-primary) !important;
        }

        /* Hero Banner */
        .hero-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 100px 0;
            position: relative;
            overflow: hidden;
        }

        .hero-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100px, -100px); }
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero-subtitle {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.95;
        }

        .cta-button {
            background: white;
            color: var(--acceso-primary);
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            color: var(--acceso-primary);
        }

        /* Promotion Sections */
        .promotion-card {
            border: none;
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            height: 100%;
            background: white;
        }

        .promotion-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .promotion-image {
            height: 200px;
            background: linear-gradient(135deg, #e9ecef 25%, #f8f9fa 25%, #f8f9fa 50%, #e9ecef 50%, #e9ecef 75%, #f8f9fa 75%);
            background-size: 20px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .promotion-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--acceso-danger);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .promotion-badge.new {
            background: var(--acceso-success);
        }

        .promotion-content {
            padding: 1.5rem;
        }

        .promotion-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--acceso-dark);
        }

        .promotion-description {
            color: var(--acceso-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .promotion-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--acceso-primary);
            margin-bottom: 1rem;
        }

        .promotion-original-price {
            font-size: 1rem;
            color: var(--acceso-secondary);
            text-decoration: line-through;
            margin-left: 0.5rem;
        }

        /* Feature Collection Grid */
        .feature-collection {
            padding: 4rem 0;
            background: var(--acceso-light);
        }

        .collection-item {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
            height: 100%;
        }

        .collection-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: var(--acceso-primary);
        }

        .collection-icon {
            width: 80px;
            height: 80px;
            background: var(--acceso-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 1.5rem;
            transition: all 0.3s ease;
        }

        .collection-item:hover .collection-icon {
            transform: scale(1.1);
            background: var(--acceso-dark);
        }

        .collection-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--acceso-dark);
        }

        .collection-description {
            color: var(--acceso-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        /* Quick Info Boxes */
        .quick-info-section {
            padding: 3rem 0;
            background: white;
        }

        .quick-info-box {
            background: var(--acceso-light);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            height: 100%;
        }

        .quick-info-box:hover {
            border-color: var(--acceso-primary);
            transform: translateY(-3px);
        }

        .quick-info-icon {
            font-size: 2.5rem;
            color: var(--acceso-primary);
            margin-bottom: 1rem;
        }

        .quick-info-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--acceso-dark);
        }

        .quick-info-text {
            color: var(--acceso-secondary);
            font-size: 0.9rem;
        }

        /* Newsletter Section */
        .newsletter-section {
            background: var(--acceso-dark);
            color: white;
            padding: 4rem 0;
        }

        .newsletter-input {
            border: none;
            border-radius: 25px 0 0 25px;
            padding: 12px 20px;
            font-size: 1rem;
        }

        .newsletter-btn {
            background: var(--acceso-primary);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 0 25px 25px 0;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .newsletter-btn:hover {
            background: #0056b3;
            color: white;
        }

        /* Footer */
        .footer {
            background: var(--acceso-dark);
            color: white;
            padding: 3rem 0 1rem;
        }

        .footer h5 {
            color: white;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .footer a {
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .footer a:hover {
            color: white;
        }

        .social-links a {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: var(--acceso-primary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            margin-right: 0.5rem;
            transition: all 0.2s ease;
        }

        .social-links a:hover {
            background: white;
            color: var(--acceso-primary);
            transform: translateY(-2px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .promotion-card,
            .collection-item {
                margin-bottom: 2rem;
            }
        }

        /* Animation Classes */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .fade-in.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Loading States */
        .api-loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <div class="item-image me-2" style="width: 40px; height: 40px;">
                    <img src="img/accesso_icon.jpg" alt="Acceso Icon"  style="width: 40px; height: 40px;">
                    <!-- <i class="fas fa-mobile-alt"></i> -->
                </div>
                Acceso
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="product/product.html">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="categories.html">Categories</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
                
                <div class="d-flex align-items-center">
                    <a href="cart.html" class="btn btn-outline-acceso me-2">
                        <i class="fas fa-shopping-cart"></i>
                        Cart
                    </a>
                    <a href="wishlist.html" class="btn btn-outline-acceso">
                        <i class="fas fa-heart"></i>
                        Wishlist
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <!-- Hero Banner -->
        <section class="hero-banner">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6 hero-content">
                        <h1 class="hero-title fade-in">Mega Sale</h1>
                        <p class="hero-subtitle fade-in">Up to 70% off on premium phone accessories. Limited time offer!</p>
                        <button class="cta-button fade-in" onclick="scrollToPromotions()">
                            Shop Now <i class="fas fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                    <div class="col-lg-6 text-center">
                        <div class="item-image mx-auto fade-in" style="width: 200px; height: 200px; font-size: 4rem;">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ongoing Promotions -->
        <section class="container py-5" id="promotions">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold mb-3">Ongoing Promotions</h2>
                <p class="lead">Don't miss out on these amazing deals!</p>
            </div>

            <!-- API Loading Indicator -->
            <div class="api-loading" id="promotionLoading">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Loading latest promotions...</p>
            </div>

            <div class="row" id="promotionsGrid">
                <!-- Promotions will be loaded here -->
            </div>
        </section>

        <!-- Feature Collection -->
        <section class="feature-collection">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="display-5 fw-bold mb-3">Feature Collection</h2>
                    <p class="lead">Discover our handpicked collections for every need</p>
                </div>

                <div class="row" id="featuresGrid">
                    <!-- Features will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Quick Info Section -->
        <section class="quick-info-section">
            <div class="container">
                <div class="row" id="quickInfoGrid">
                    <!-- Quick info boxes will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Newsletter Section -->
        <section class="newsletter-section">
            <div class="container text-center">
                <h3 class="mb-4">Stay Updated with Latest Offers</h3>
                <p class="mb-4">Subscribe to our newsletter and never miss a deal!</p>
                <div class="row justify-content-center">
                    <div class="col-md-6">
                        <div class="input-group">
                            <input type="email" class="form-control newsletter-input" placeholder="Enter your email" id="newsletterEmail">
                            <button class="btn newsletter-btn" type="button" id="subscribeBtn">
                                Subscribe <i class="fas fa-paper-plane ms-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5>Acceso</h5>
                    <p>Your trusted partner for premium phone accessories. We provide high-quality products to protect and enhance your mobile experience.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-md-2 mb-4">
                    <h5>Shop</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Phone Cases</a></li>
                        <li><a href="#">Chargers</a></li>
                        <li><a href="#">Screen Protectors</a></li>
                        <li><a href="#">Audio</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-4">
                    <h5>Support</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Returns</a></li>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Track Order</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-4">
                    <h5>Company</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Press</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-4">
                    <h5>Legal</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2025 Acceso Phone Accessories. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">Made with <i class="fas fa-heart text-danger"></i> for mobile lovers</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Notification Toast -->
    <div class="position-fixed top-0 end-0 p-3" style="z-index: 1055">
        <div id="liveToast" class="toast" role="alert">
            <div class="toast-header">
                <strong class="me-auto" id="toastTitle">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                Message here
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

    <script>
        $(document).ready(function() {
            // Initialize application
            initializeApp();
            loadPromotions();
            loadFeatureCollections();
            loadQuickInfo();
            setupEventListeners();
            initializeAnimations();
            
            // Initialize user session
            if (!sessionStorage.getItem('userSession')) {
                sessionStorage.setItem('userSession', JSON.stringify({
                    sessionId: 'session_' + Date.now(),
                    startTime: new Date().toISOString(),
                    pageViews: 1,
                    deviceType: /Mobile|Android|iPhone|iPad/.test(navigator.userAgent) ? 'mobile' : 'desktop',
                    landingPage: 'homepage'
                }));
            }

            // Track homepage visit
            trackPageView();
        });

        function initializeApp() {
            // Initialize localStorage for user preferences
            if (!localStorage.getItem('userPreferences')) {
                localStorage.setItem('userPreferences', JSON.stringify({
                    currency: 'RM',
                    theme: 'light',
                    language: 'en',
                    lastVisited: new Date().toISOString(),
                    newsletter: false
                }));
            }
            
            if (!localStorage.getItem('viewedPromotions')) {
                localStorage.setItem('viewedPromotions', JSON.stringify([]));
            }

            if (!sessionStorage.getItem('homePageData')) {
                sessionStorage.setItem('homePageData', JSON.stringify({
                    loadTime: new Date().toISOString(),
                    promotionsViewed: [],
                    featuresClicked: []
                }));
            }
        }

        function loadPromotions() {
            $('#promotionLoading').show();
            
            // Simulate RESTful API call for ongoing promotions
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/posts',
                method: 'GET',
                dataType: 'json',
                timeout: 10000,
                success: function(data) {
                    // Transform data into promotion format
                    const promotions = data.slice(0, 6).map((post, index) => ({
                        id: post.id,
                        title: generatePromotionTitle(index),
                        description: generatePromotionDescription(index),
                        originalPrice: generateOriginalPrice(index),
                        salePrice: generateSalePrice(index),
                        discount: calculateDiscount(index),
                        image: null,
                        badge: getPromotionBadge(index),
                        validUntil: generateValidDate(),
                        category: getPromotionCategory(index)
                    }));
                    
                    sessionStorage.setItem('promotions', JSON.stringify(promotions));
                    renderPromotions(promotions);
                    $('#promotionLoading').hide();
                    
                    // Track API success
                    trackUserAction('promotions_loaded', { count: promotions.length });
                },
                error: function(xhr, status, error) {
                    console.log('Promotions API Error:', error);
                    const fallbackPromotions = generateFallbackPromotions();
                    sessionStorage.setItem('promotions', JSON.stringify(fallbackPromotions));
                    renderPromotions(fallbackPromotions);
                    $('#promotionLoading').hide();
                    showNotification('Info', 'Using cached promotion data', 'info');
                }
            });
        }

        function generatePromotionTitle(index) {
            const titles = [
                'Flash Sale: Premium Cases 70% Off',
                'Buy 2 Get 1 Free: Charging Cables',
                'New Arrival: iPhone 15 Accessories',
                'Weekend Special: Screen Protectors',
                'Power Bank Mega Deal',
                'Wireless Charger Bundle Offer'
            ];
            return titles[index] || `Special Offer ${index + 1}`;
        }

        function generatePromotionDescription(index) {
            const descriptions = [
                'Limited time offer on premium leather and silicone phone cases. Perfect protection for your device.',
                'Stock up on high-quality USB-C and Lightning cables. Fast charging guaranteed.',
                'Be the first to get accessories for the latest iPhone 15 series. Premium quality assured.',
                'Protect your screen with our tempered glass protectors. Crystal clear and bubble-free.',
                '20,000mAh power banks at unbeatable prices. Never run out of battery again.',
                'Fast wireless charging pads with stand. Compatible with all Qi-enabled devices.'
            ];
            return descriptions[index] || 'Amazing deal on phone accessories. Don\'t miss out!';
        }

        function generateOriginalPrice(index) {
            const prices = [199, 89, 149, 59, 179, 129];
            return prices[index] || Math.floor(Math.random() * 200) + 50;
        }

        function generateSalePrice(index) {
            const originalPrices = [199, 89, 149, 59, 179, 129];
            const discounts = [0.7, 0.67, 0.6, 0.5, 0.45, 0.4];
            return Math.floor(originalPrices[index] * discounts[index]);
        }

        function calculateDiscount(index) {
            const originalPrice = generateOriginalPrice(index);
            const salePrice = generateSalePrice(index);
            return Math.round(((originalPrice - salePrice) / originalPrice) * 100);
        }

        function getPromotionBadge(index) {
            const badges = ['SALE', 'NEW', 'HOT', 'LIMITED', 'BUNDLE', 'FLASH'];
            return badges[index] || 'OFFER';
        }

        function generateValidDate() {
            const date = new Date();
            date.setDate(date.getDate() + Math.floor(Math.random() * 7) + 1);
            return date.toISOString().split('T')[0];
        }

        function getPromotionCategory(index) {
            const categories = ['cases', 'chargers', 'accessories', 'protection', 'power', 'wireless'];
            return categories[index] || 'accessories';
        }

        function generateFallbackPromotions() {
            return Array.from({length: 6}, (_, i) => ({
                id: i + 1,
                title: generatePromotionTitle(i),
                description: generatePromotionDescription(i),
                originalPrice: generateOriginalPrice(i),
                salePrice: generateSalePrice(i),
                discount: calculateDiscount(i),
                image: null,
                badge: getPromotionBadge(i),
                validUntil: generateValidDate(),
                category: getPromotionCategory(i)
            }));
        }

        function renderPromotions(promotions) {
            const grid = $('#promotionsGrid');
            grid.empty();
            
            promotions.forEach((promotion, index) => {
                const promotionCard = createPromotionCard(promotion, index);
                grid.append(promotionCard);
            });
            
            // Trigger fade-in animations
            setTimeout(() => {
                $('.promotion-card').addClass('fade-in active');
            }, 100);
        }

        function createPromotionCard(promotion, index) {
            const badgeClass = promotion.badge === 'NEW' ? 'new' : '';
            
            return `
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card promotion-card card-shadow fade-in" style="animation-delay: ${index * 0.1}s">
                        <div class="promotion-image">
                            <span class="promotion-badge ${badgeClass}">${promotion.badge}</span>
                            <div class="item-image">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                        </div>
                        <div class="promotion-content">
                            <h5 class="promotion-title">${promotion.title}</h5>
                            <p class="promotion-description">${promotion.description}</p>
                            <div class="promotion-price">
                                RM ${promotion.salePrice}
                                <span class="promotion-original-price">RM ${promotion.originalPrice}</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <small class="text-success fw-bold">${promotion.discount}% OFF</small>
                                <small class="text-muted">Valid until ${promotion.validUntil}</small>
                            </div>
                            <button class="btn btn-primary w-100" onclick="viewPromotion(${promotion.id})">
                                Shop Now <i class="fas fa-arrow-right ms-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function loadFeatureCollections() {
            // Simulate RESTful API call for feature collections
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/users',
                method: 'GET',
                dataType: 'json',
                success: function(data) {
                    const features = data.slice(0, 4).map((user, index) => ({
                        id: user.id,
                        title: generateFeatureTitle(index),
                        description: generateFeatureDescription(index),
                        icon: getFeatureIcon(index),
                        link: getFeatureLink(index),
                        itemCount: Math.floor(Math.random() * 50) + 10
                    }));
                    
                    sessionStorage.setItem('featureCollections', JSON.stringify(features));
                    renderFeatureCollections(features);
                    
                    trackUserAction('features_loaded', { count: features.length });
                },
                error: function() {
                    const fallbackFeatures = generateFallbackFeatures();
                    sessionStorage.setItem('featureCollections', JSON.stringify(fallbackFeatures));
                    renderFeatureCollections(fallbackFeatures);
                }
            });
        }

        function generateFeatureTitle(index) {
            const titles = [
                'Gaming Accessories',
                'Wireless Collection',
                'Protection Essentials',
                'Car Accessories'
            ];
            return titles[index] || `Collection ${index + 1}`;
        }

        function generateFeatureDescription(index) {
            const descriptions = [
                'Level up your mobile gaming with our specialized gaming accessories and controllers.',
                'Cut the cord with our premium wireless charging and audio solutions.',
                'Keep your device safe with our comprehensive protection range.',
                'Stay connected on the road with our car mount and charging solutions.'
            ];
            return descriptions[index] || 'Discover amazing phone accessories in this collection.';
        }

        function getFeatureIcon(index) {
            const icons = ['fas fa-gamepad', 'fas fa-wifi', 'fas fa-shield-alt', 'fas fa-car'];
            return icons[index] || 'fas fa-mobile-alt';
        }

        function getFeatureLink(index) {
            const links = ['gaming.html', 'wireless.html', 'protection.html', 'car-accessories.html'];
            return links[index] || 'products.html';
        }

        function generateFallbackFeatures() {
            return Array.from({length: 4}, (_, i) => ({
                id: i + 1,
                title: generateFeatureTitle(i),
                description: generateFeatureDescription(i),
                icon: getFeatureIcon(i),
                link: getFeatureLink(i),
                itemCount: Math.floor(Math.random() * 50) + 10
            }));
        }

        function renderFeatureCollections(features) {
            const grid = $('#featuresGrid');
            grid.empty();
            
            features.forEach((feature, index) => {
                const featureCard = createFeatureCard(feature, index);
                grid.append(featureCard);
            });
        }

        function createFeatureCard(feature, index) {
            return `
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="collection-item fade-in" style="animation-delay: ${index * 0.1}s" onclick="navigateToFeature('${feature.link}', ${feature.id})">
                        <div class="collection-icon">
                            <i class="${feature.icon}"></i>
                        </div>
                        <h5 class="collection-title">${feature.title}</h5>
                        <p class="collection-description">${feature.description}</p>
                        <small class="text-muted">${feature.itemCount} items available</small>
                    </div>
                </div>
            `;
        }

        function loadQuickInfo() {
            // Create quick info data
            const quickInfoData = [
                {
                    icon: 'fas fa-shipping-fast',
                    title: 'Free Shipping',
                    text: 'On orders over RM120'
                },
                {
                    icon: 'fas fa-undo-alt',
                    title: '30-Day Returns',
                    text: 'Hassle-free returns'
                },
                {
                    icon: 'fas fa-award',
                    title: 'Quality Guaranteed',
                    text: 'Premium materials only'
                },
                {
                    icon: 'fas fa-headset',
                    title: '24/7 Support',
                    text: 'Always here to help'
                }
            ];
            
            sessionStorage.setItem('quickInfo', JSON.stringify(quickInfoData));
            renderQuickInfo(quickInfoData);
        }

        function renderQuickInfo(quickInfo) {
            const grid = $('#quickInfoGrid');
            grid.empty();
            
            quickInfo.forEach((info, index) => {
                const infoCard = createQuickInfoCard(info, index);
                grid.append(infoCard);
            });
        }

        function createQuickInfoCard(info, index) {
            return `
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="quick-info-box fade-in" style="animation-delay: ${index * 0.1}s">
                        <div class="quick-info-icon">
                            <i class="${info.icon}"></i>
                        </div>
                        <h6 class="quick-info-title">${info.title}</h6>
                        <p class="quick-info-text">${info.text}</p>
                    </div>
                </div>
            `;
        }

        function setupEventListeners() {
            // Newsletter subscription
            $('#subscribeBtn').click(function() {
                const email = $('#newsletterEmail').val().trim();
                if (email && isValidEmail(email)) {
                    subscribeToNewsletter(email);
                } else {
                    showNotification('Error', 'Please enter a valid email address', 'error');
                }
            });
            
            // Enter key for newsletter
            $('#newsletterEmail').keypress(function(e) {
                if (e.which === 13) {
                    $('#subscribeBtn').click();
                }
            });
        }

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function subscribeToNewsletter(email) {
            // Simulate API call for newsletter subscription
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/posts',
                method: 'POST',
                dataType: 'json',
                data: {
                    email: email,
                    subscribed: true,
                    timestamp: new Date().toISOString()
                },
                success: function(response) {
                    // Store subscription in localStorage
                    const preferences = JSON.parse(localStorage.getItem('userPreferences') || '{}');
                    preferences.newsletter = true;
                    preferences.email = email;
                    preferences.subscriptionDate = new Date().toISOString();
                    localStorage.setItem('userPreferences', JSON.stringify(preferences));
                    
                    $('#newsletterEmail').val('');
                    showNotification('Success', 'Successfully subscribed to newsletter!', 'success');
                    trackUserAction('newsletter_subscribe', { email });
                },
                error: function() {
                    showNotification('Error', 'Subscription failed. Please try again.', 'error');
                }
            });
        }

        function viewPromotion(promotionId) {
            const promotions = JSON.parse(sessionStorage.getItem('promotions') || '[]');
            const promotion = promotions.find(p => p.id === promotionId);
            
            if (promotion) {
                // Track promotion view in localStorage
                const viewedPromotions = JSON.parse(localStorage.getItem('viewedPromotions') || '[]');
                if (!viewedPromotions.includes(promotionId)) {
                    viewedPromotions.push(promotionId);
                    localStorage.setItem('viewedPromotions', JSON.stringify(viewedPromotions));
                }
                
                // Track in session
                const homePageData = JSON.parse(sessionStorage.getItem('homePageData') || '{}');
                if (!homePageData.promotionsViewed) homePageData.promotionsViewed = [];
                homePageData.promotionsViewed.push({
                    id: promotionId,
                    title: promotion.title,
                    timestamp: new Date().toISOString()
                });
                sessionStorage.setItem('homePageData', JSON.stringify(homePageData));
                
                trackUserAction('promotion_clicked', { 
                    promotionId, 
                    title: promotion.title,
                    category: promotion.category 
                });
                
                showNotification('Info', `Viewing ${promotion.title}`, 'info');
                // In real app: window.location.href = `promotion.html?id=${promotionId}`;
                console.log('Navigate to promotion:', promotion.title);
            }
        }

        function navigateToFeature(link, featureId) {
            const features = JSON.parse(sessionStorage.getItem('featureCollections') || '[]');
            const feature = features.find(f => f.id === featureId);
            
            if (feature) {
                // Track feature click in session
                const homePageData = JSON.parse(sessionStorage.getItem('homePageData') || '{}');
                if (!homePageData.featuresClicked) homePageData.featuresClicked = [];
                homePageData.featuresClicked.push({
                    id: featureId,
                    title: feature.title,
                    link: link,
                    timestamp: new Date().toISOString()
                });
                sessionStorage.setItem('homePageData', JSON.stringify(homePageData));
                
                trackUserAction('feature_clicked', { 
                    featureId, 
                    title: feature.title,
                    link: link 
                });
                
                showNotification('Info', `Exploring ${feature.title}`, 'info');
                // In real app: window.location.href = link;
                console.log('Navigate to feature:', feature.title, 'Link:', link);
            }
        }

        function scrollToPromotions() {
            document.getElementById('promotions').scrollIntoView({ 
                behavior: 'smooth' 
            });
            trackUserAction('hero_cta_clicked', { action: 'scroll_to_promotions' });
        }

        function initializeAnimations() {
            // Intersection Observer for fade-in animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, { threshold: 0.1 });
            
            // Observe all fade-in elements
            setTimeout(() => {
                document.querySelectorAll('.fade-in').forEach(el => {
                    observer.observe(el);
                });
            }, 500);
        }

        function trackPageView() {
            const session = JSON.parse(sessionStorage.getItem('userSession') || '{}');
            session.pageViews = (session.pageViews || 0) + 1;
            session.lastPageView = new Date().toISOString();
            session.currentPage = 'homepage';
            sessionStorage.setItem('userSession', JSON.stringify(session));
            
            // Track homepage specific metrics
            const homePageData = JSON.parse(sessionStorage.getItem('homePageData') || '{}');
            homePageData.visitCount = (homePageData.visitCount || 0) + 1;
            homePageData.lastVisit = new Date().toISOString();
            sessionStorage.setItem('homePageData', JSON.stringify(homePageData));
        }

        function trackUserAction(action, data = {}) {
            const session = JSON.parse(sessionStorage.getItem('userSession') || '{}');
            
            if (!session.actions) {
                session.actions = [];
            }
            
            session.actions.push({
                action,
                data,
                timestamp: new Date().toISOString(),
                page: 'homepage'
            });
            
            // Keep only last 50 actions
            if (session.actions.length > 50) {
                session.actions = session.actions.slice(-50);
            }
            
            sessionStorage.setItem('userSession', JSON.stringify(session));
        }

        function showNotification(title, message, type = 'info') {
            const toast = new bootstrap.Toast(document.getElementById('liveToast'));
            $('#toastTitle').text(title);
            $('#toastMessage').text(message);
            
            const toastElement = $('#liveToast');
            toastElement.removeClass('bg-success bg-danger bg-warning bg-info');
            
            switch(type) {
                case 'success':
                    toastElement.addClass('bg-success text-white');
                    break;
                case 'error':
                    toastElement.addClass('bg-danger text-white');
                    break;
                case 'warning':
                    toastElement.addClass('bg-warning');
                    break;
                default:
                    toastElement.addClass('bg-info text-white');
            }
            
            toast.show();
        }

        // Social Media Integration Simulation
        function loadSocialMediaFeed() {
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/comments',
                method: 'GET',
                dataType: 'json',
                success: function(comments) {
                    const socialPosts = comments.slice(0, 5).map(comment => ({
                        id: comment.id,
                        author: comment.name,
                        content: comment.body.substring(0, 100) + '...',
                        likes: Math.floor(Math.random() * 100) + 10,
                        timestamp: new Date(Date.now() - Math.random() * 86400000).toISOString()
                    }));
                    
                    sessionStorage.setItem('socialMediaFeed', JSON.stringify(socialPosts));
                    trackUserAction('social_media_loaded', { posts: socialPosts.length });
                },
                error: function() {
                    console.log('Social media feed unavailable');
                }
            });
        }

        // Load social media feed after page load
        setTimeout(loadSocialMediaFeed, 2000);

        // Performance monitoring
        function trackPerformance() {
            if ('performance' in window) {
                const navigation = performance.getEntriesByType('navigation')[0];
                const performanceData = {
                    loadTime: navigation.loadEventEnd - navigation.loadEventStart,
                    domContentLoaded: navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart,
                    timestamp: new Date().toISOString(),
                    page: 'homepage'
                };
                
                sessionStorage.setItem('performanceData', JSON.stringify(performanceData));
                trackUserAction('performance_measured', performanceData);
            }
        }

        // Initialize performance tracking
        window.addEventListener('load', trackPerformance);

        // Cookie management
        function initializeCookiePreferences() {
            const cookieConsent = localStorage.getItem('cookieConsent');
            
            if (!cookieConsent) {
                setTimeout(() => {
                    localStorage.setItem('cookieConsent', JSON.stringify({
                        accepted: true,
                        timestamp: new Date().toISOString(),
                        preferences: {
                            necessary: true,
                            analytics: true,
                            marketing: false
                        }
                    }));
                    trackUserAction('cookie_consent', { accepted: true });
                }, 3000);
            }
        }

        // Initialize cookie preferences
        initializeCookiePreferences();
    </script>
</body>
</html>