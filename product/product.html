<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso - Products | Phone Accessories</title>
    <link rel="icon" type="image/x-icon" href="../img/accesso_icon.jpg">
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <style>
        /* Base styles from provided CSS */
        html,
        body {
            height: 100%;
        }

        body {
            display: flex;
            flex-direction: column;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        main {
            flex: 1 0 auto;
        }

        footer {
            flex-shrink: 0;
            margin-left: 0 !important;
            margin-right: 0 !important;
            width: 100%;
        }

        .footer-content {
            max-width: 1100px;
            margin: 0 auto;
            padding: 24px;
        }

        .page {
            max-width: 1100px;
            margin-inline: auto;
            padding: 24px
        }

        .card-shadow {
            box-shadow: 0 6px 18px rgba(0, 0, 0, .06);
            border: 0
        }

        .bundle-box {
            background: #f7f7f8;
            border: 2px solid #e5e7eb;
            border-radius: 12px
        }

        .visually-hidden {
            position: absolute !important;
            clip: rect(1px, 1px, 1px, 1px);
            padding: 0;
            border: 0;
            height: 1px;
            width: 1px;
            overflow: hidden;
            white-space: nowrap
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 300px;
        }

        .form-control:focus,
        .form-check-input:focus {
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
        }

        .item-image {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #e9ecef 25%, #f8f9fa 25%, #f8f9fa 50%, #e9ecef 50%, #e9ecef 75%, #f8f9fa 75%);
            background-size: 8px 8px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #6c757d;
        }

        /* Cart CSS Variables */
        :root {
            --soft-gray: #f7f7f8;
            --ink: #222;
            --muted: #6c757d;
            --brand: #0d6efd;
        }

        body {
            background: #fff;
            color: var(--ink)
        }

        .page-wrap {
            max-width: 1200px;
            margin-inline: auto;
            padding: 24px
        }

        /* Acceso Brand Colors */
        :root {
            --acceso-primary: #007bff;
            --acceso-secondary: #6c757d;
            --acceso-light: #f8f9fa;
            --acceso-dark: #343a40;
        }

        /* Navigation Styles */
        .navbar {
            background: white !important;
            border-bottom: 1px solid #e9ecef;
            padding: 1rem 0;
        }

        .navbar-brand {
            font-weight: 700;
            color: var(--acceso-dark) !important;
            font-size: 1.5rem;
        }

        .nav-link {
            color: var(--acceso-dark) !important;
            font-weight: 500;
            padding: 0.5rem 1rem !important;
            margin: 0 0.25rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .nav-link:hover,
        .nav-link.active {
            background-color: var(--acceso-light);
            color: var(--acceso-primary) !important;
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0;
            margin-bottom: 40px;
        }

        .hero-title {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        /* Product Cards */
        .product-card {
            border: 1px solid #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            background: white;
            height: 100%;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border-color: var(--acceso-primary);
        }

        .product-image-container {
            height: 220px;
            background: var(--acceso-light);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-placeholder {
            background: linear-gradient(135deg, #e9ecef 25%, #f8f9fa 25%, #f8f9fa 50%, #e9ecef 50%, #e9ecef 75%, #f8f9fa 75%);
            background-size: 20px 20px;
            color: #6c757d;
            font-size: 14px;
        }

        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #dc3545;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .product-badge.new {
            background: #28a745;
        }

        .product-info {
            padding: 1.25rem;
        }

        .product-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--acceso-dark);
            height: 2.6rem;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .product-description {
            color: var(--acceso-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            height: 2.7rem;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .product-price {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--acceso-primary);
            margin-bottom: 1rem;
        }

        .product-rating {
            color: #ffc107;
            margin-bottom: 1rem;
        }

        /* Buttons */
        .btn-acceso-primary {
            background-color: var(--acceso-primary);
            border-color: var(--acceso-primary);
            color: white;
            font-weight: 500;
            padding: 0.5rem 1.25rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .btn-acceso-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
            color: white;
            transform: translateY(-1px);
        }

        .btn-outline-acceso {
            border: 1px solid #dee2e6;
            color: var(--acceso-secondary);
            background: white;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .btn-outline-acceso:hover {
            border-color: var(--acceso-primary);
            color: var(--acceso-primary);
            background: var(--acceso-light);
        }

        /* Category Filters */
        .category-section {
            padding: 3rem 0;
            background: var(--acceso-light);
        }

        .category-btn {
            background: white;
            border: 1px solid #dee2e6;
            color: var(--acceso-dark);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            margin: 0.25rem;
            font-weight: 500;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-block;
        }

        .category-btn:hover,
        .category-btn.active {
            background: var(--acceso-primary);
            border-color: var(--acceso-primary);
            color: white;
            text-decoration: none;
        }

        /* Search Bar */
        .search-container {
            max-width: 500px;
            margin: 0 auto;
        }

        .search-input {
            border-radius: 25px;
            border: 2px solid white;
            padding: 0.75rem 1.25rem;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.95);
        }

        .search-input:focus {
            border-color: white;
            box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.25);
            background: white;
        }

        .search-btn {
            border-radius: 25px;
            padding: 0.75rem 1.5rem;
            background: white;
            color: var(--acceso-primary);
            border: 2px solid white;
            font-weight: 600;
        }

        .search-btn:hover {
            background: var(--acceso-light);
            color: var(--acceso-primary);
        }

        /* Loading Indicator */
        .api-loading {
            display: none;
            text-align: center;
            padding: 3rem;
        }

        /* Features Section */
        .features-section {
            padding: 4rem 0;
            background: white;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: var(--acceso-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto 1rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .product-card {
                margin-bottom: 1.5rem;
            }
        }

        /* Footer */
        .footer {
            background: var(--acceso-dark);
            color: white;
            padding: 3rem 0 1rem;
        }

        .footer h5 {
            color: white;
            margin-bottom: 1rem;
        }

        .footer a {
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .footer a:hover {
            color: white;
        }

        .social-links a {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: var(--acceso-primary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            margin-right: 0.5rem;
            transition: all 0.2s ease;
        }

        .social-links a:hover {
            background: white;
            color: var(--acceso-primary);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="../index.html">
                <div class="item-image me-2" style="width: 40px; height: 40px;">
                    <img src="../img/accesso_icon.jpg" alt="Acceso Icon"  style="width: 40px; height: 40px;">
                    <!-- <i class="fas fa-mobile-alt"></i> -->
                </div>
                Acceso
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="product.html">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="categories.html">Categories</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
                
                <div class="d-flex align-items-center">
                    <a href="cart.html" class="btn btn-outline-acceso me-2">
                        <i class="fas fa-shopping-cart"></i>
                        Cart
                    </a>
                    <a href="wishlist.html" class="btn btn-outline-acceso">
                        <i class="fas fa-heart"></i>
                        Wishlist
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="container text-center">
                <h1 class="hero-title">Premium Phone Accessories</h1>
                <p class="hero-subtitle">Discover the best accessories for your mobile devices - Cases, Chargers, Screen Protectors & More</p>
                
                <div class="search-container">
                    <div class="input-group">
                        <input type="text" class="form-control search-input" placeholder="Search for phone accessories..." id="searchInput">
                        <button class="btn search-btn" type="button" id="searchBtn">
                            <i class="fas fa-search me-1"></i>Search
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Category Filter Section -->
        <section class="category-section">
            <div class="container text-center">
                <h2 class="mb-4">Shop by Category</h2>
                <div id="categoryFilters">
                    <a href="#" class="category-btn active" data-category="all">All Products</a>
                    <a href="#" class="category-btn" data-category="cases">Phone Cases</a>
                    <a href="#" class="category-btn" data-category="chargers">Chargers & Cables</a>
                    <a href="#" class="category-btn" data-category="protection">Screen Protection</a>
                    <a href="#" class="category-btn" data-category="audio">Audio Accessories</a>
                    <a href="#" class="category-btn" data-category="holders">Mounts & Holders</a>
                </div>
            </div>
        </section>

        <!-- API Loading Indicator -->
        <div class="api-loading" id="loadingIndicator">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2">Loading products from API...</p>
        </div>

        <!-- Featured Products Section -->
        <section class="container py-5">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="text-center mb-5">Featured Phone Accessories</h2>
                    <div class="row" id="productsGrid">
                        <!-- Products will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features-section">
            <div class="container">
                <div class="row text-center">
                    <div class="col-md-4 mb-4">
                        <div class="feature-icon">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                        <h5>Fast Shipping</h5>
                        <p class="text-muted">Free shipping on orders over RM120</p>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h5>Quality Guarantee</h5>
                        <p class="text-muted">30-day money back guarantee</p>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="feature-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h5>24/7 Support</h5>
                        <p class="text-muted">Customer support always available</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5>Acceso</h5>
                    <p>Your trusted partner for premium phone accessories. We provide high-quality products to protect and enhance your mobile experience.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-md-2 mb-4">
                    <h5>Shop</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Phone Cases</a></li>
                        <li><a href="#">Chargers</a></li>
                        <li><a href="#">Screen Protectors</a></li>
                        <li><a href="#">Audio</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-4">
                    <h5>Support</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Returns</a></li>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Track Order</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-4">
                    <h5>Company</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Press</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-4">
                    <h5>Legal</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2025 Acceso Phone Accessories. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">Made with <i class="fas fa-heart text-danger"></i> for mobile lovers</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Notification Toast -->
    <div class="position-fixed top-0 end-0 p-3" style="z-index: 1055">
        <div id="liveToast" class="toast" role="alert">
            <div class="toast-header">
                <strong class="me-auto" id="toastTitle">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                Message here
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

    <script>
        $(document).ready(function() {
            // Initialize application
            initializeApp();
            loadProducts();
            setupEventListeners();
            loadUserPreferences();
            
            // Initialize user session
            if (!sessionStorage.getItem('userSession')) {
                sessionStorage.setItem('userSession', JSON.stringify({
                    sessionId: 'session_' + Date.now(),
                    startTime: new Date().toISOString(),
                    pageViews: 1,
                    deviceType: /Mobile|Android|iPhone|iPad/.test(navigator.userAgent) ? 'mobile' : 'desktop'
                }));
            }

            // Track page view
            trackPageView();
        });

        function initializeApp() {
            // Initialize localStorage for user preferences and wishlist
            if (!localStorage.getItem('wishlist')) {
                localStorage.setItem('wishlist', JSON.stringify([]));
            }
            if (!localStorage.getItem('userPreferences')) {
                localStorage.setItem('userPreferences', JSON.stringify({
                    currency: 'RM',
                    theme: 'light',
                    language: 'en',
                    lastVisited: new Date().toISOString()
                }));
            }
            if (!localStorage.getItem('searchHistory')) {
                localStorage.setItem('searchHistory', JSON.stringify([]));
            }
        }

        function loadProducts() {
            $('#loadingIndicator').show();
            
            // Simulate RESTful API call with jQuery AJAX for phone accessories
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/posts',
                method: 'GET',
                dataType: 'json',
                timeout: 10000,
                success: function(data) {
                    // Transform posts data into phone accessory products
                    const products = data.slice(0, 12).map((post, index) => ({
                        id: post.id,
                        title: generateAccessoryTitle(index),
                        description: generateAccessoryDescription(index),
                        price: generateAccessoryPrice(index),
                        originalPrice: null,
                        category: getAccessoryCategory(index),
                        image: null, // Using placeholder for now
                        rating: (Math.random() * 2 + 3).toFixed(1),
                        reviews: Math.floor(Math.random() * 200) + 10,
                        isNew: Math.random() > 0.7,
                        onSale: Math.random() > 0.8,
                        brand: getAccessoryBrand(index),
                        compatibility: getPhoneCompatibility(index)
                    }));
                    
                    // Add sale prices for products on sale
                    products.forEach(product => {
                        if (product.onSale) {
                            product.originalPrice = product.price;
                            product.price = Math.floor(product.price * 0.8); // 20% discount
                        }
                    });
                    
                    // Store products in sessionStorage for quick access
                    sessionStorage.setItem('products', JSON.stringify(products));
                    renderProducts(products);
                    $('#loadingIndicator').hide();
                },
                error: function(xhr, status, error) {
                    console.log('API Error:', error);
                    // Fallback: use local data if API fails
                    const fallbackProducts = generateFallbackAccessories();
                    sessionStorage.setItem('products', JSON.stringify(fallbackProducts));
                    renderProducts(fallbackProducts);
                    $('#loadingIndicator').hide();
                    showNotification('Info', 'Using offline product data', 'info');
                }
            });
        }

        function generateAccessoryTitle(index) {
            const titles = [
                'Premium Leather Phone Case', 'Wireless Fast Charger 15W', 'Tempered Glass Screen Protector',
                'Car Phone Mount Holder', 'USB-C Fast Charging Cable', '10,000mAh Power Bank',
                'Bluetooth Wireless Earbuds', 'Phone Ring Holder Stand', 'Waterproof Phone Pouch',
                'Magnetic Car Charger', 'Pop Socket Phone Grip', 'Clear Transparent Case'
            ];
            return titles[index] || `Phone Accessory ${index + 1}`;
        }

        function generateAccessoryDescription(index) {
            const descriptions = [
                'Premium quality leather case with card slots and stand function',
                'Fast wireless charging pad compatible with Qi-enabled devices',
                'Ultra-clear 9H hardness tempered glass with oleophobic coating',
                'Adjustable car mount with 360-degree rotation and secure grip',
                'Durable braided USB-C cable with fast charging and data sync',
                'High-capacity portable charger with dual USB outputs and LED display',
                'True wireless earbuds with noise cancellation and long battery life',
                'Multifunctional ring holder that doubles as a phone stand',
                'IPX8 waterproof pouch perfect for swimming and water sports',
                'Magnetic wireless car charger with automatic alignment',
                'Collapsible grip and stand for secure one-handed phone use',
                'Crystal clear case with reinforced corners for drop protection'
            ];
            return descriptions[index] || 'High-quality phone accessory designed for everyday use and protection.';
        }

        function generateAccessoryPrice(index) {
            const prices = [59, 45, 25, 35, 19, 89, 129, 15, 29, 55, 12, 39];
            return prices[index] || Math.floor(Math.random() * 100) + 20;
        }

        function getAccessoryCategory(index) {
            const categories = [
                'cases', 'chargers', 'protection', 'holders', 'chargers', 'chargers',
                'audio', 'holders', 'protection', 'chargers', 'holders', 'cases'
            ];
            return categories[index] || 'cases';
        }

        function getAccessoryBrand(index) {
            const brands = ['Acceso Pro', 'TechGuard', 'PowerMax', 'SecureMount', 'FastCharge', 'EnergyBank'];
            return brands[index % brands.length];
        }

        function getPhoneCompatibility(index) {
            const compatibility = [
                'iPhone 12/13/14/15 Series', 'Universal Qi Compatible', 'Universal (Cut to Fit)',
                'Universal 4-7 inch phones', 'USB-C Devices', 'Universal USB Compatible',
                'iOS & Android Compatible', 'Universal Smartphones', 'Up to 6.9 inch phones',
                'Qi-enabled devices', 'Universal Smartphones', 'iPhone & Samsung Models'
            ];
            return compatibility[index] || 'Universal Compatible';
        }

        function generateFallbackAccessories() {
            return Array.from({length: 12}, (_, i) => ({
                id: i + 1,
                title: generateAccessoryTitle(i),
                description: generateAccessoryDescription(i),
                price: generateAccessoryPrice(i),
                originalPrice: null,
                category: getAccessoryCategory(i),
                image: null,
                rating: (Math.random() * 2 + 3).toFixed(1),
                reviews: Math.floor(Math.random() * 200) + 10,
                isNew: Math.random() > 0.7,
                onSale: Math.random() > 0.8,
                brand: getAccessoryBrand(i),
                compatibility: getPhoneCompatibility(i)
            }));
        }

        function renderProducts(products) {
            const grid = $('#productsGrid');
            grid.empty();
            
            if (products.length === 0) {
                grid.html('<div class="col-12 text-center"><p class="text-muted">No products found matching your criteria.</p></div>');
                return;
            }
            
            products.forEach(product => {
                const productCard = createProductCard(product);
                grid.append(productCard);
            });
        }

        function createProductCard(product) {
            const badges = [];
            if (product.isNew) badges.push('<span class="product-badge new">NEW</span>');
            if (product.onSale) badges.push('<span class="product-badge">SALE</span>');
            
            const priceHTML = product.onSale && product.originalPrice ? 
                `<span class="product-price">RM ${product.price} <small class="text-muted"><del>RM ${product.originalPrice}</del></small></span>` :
                `<span class="product-price">RM ${product.price}</span>`;
            
            return `
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="product-card">
                        ${badges.join('')}
                        <div class="product-image-container product-placeholder">
                            <div class="item-image" style="width: 80px; height: 80px;">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">${product.title}</h5>
                            <p class="product-description">${product.description}</p>
                            <div class="product-rating mb-2">
                                ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                                <small class="text-muted">(${product.reviews} reviews)</small>
                            </div>
                            ${priceHTML}
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <button class="btn btn-outline-acceso btn-sm" onclick="toggleWishlist(${product.id})" title="Add to Wishlist">
                                    <i class="fas fa-heart"></i>
                                </button>
                                <button class="btn btn-acceso-primary" onclick="viewProduct(${product.id})">
                                    View Details
                                </button>
                            </div>
                            <small class="text-muted d-block mt-2">
                                <i class="fas fa-mobile-alt me-1"></i>${product.compatibility}
                            </small>
                        </div>
                    </div>
                </div>
            `;
        }

        function viewProduct(productId) {
            // Store selected product in sessionStorage for product page
            const products = JSON.parse(sessionStorage.getItem('products') || '[]');
            const product = products.find(p => p.id === productId);
            
            if (product) {
                sessionStorage.setItem('selectedProduct', JSON.stringify(product));
                trackUserAction('view_product', { productId, productTitle: product.title });
                showNotification('Info', `Viewing ${product.title}`, 'info');
                // In a real app, this would navigate to product.html
                console.log('Navigate to product page for:', product.title);
            }
        }

        function toggleWishlist(productId) {
            const products = JSON.parse(sessionStorage.getItem('products') || '[]');
            const product = products.find(p => p.id === productId);
            
            if (!product) return;
            
            const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
            const existingIndex = wishlist.findIndex(item => item.id === productId);
            
            if (existingIndex > -1) {
                wishlist.splice(existingIndex, 1);
                showNotification('Info', `${product.title} removed from wishlist`, 'info');
            } else {
                wishlist.push({
                    id: product.id,
                    title: product.title,
                    price: product.price,
                    category: product.category,
                    dateAdded: new Date().toISOString()
                });
                showNotification('Success', `${product.title} added to wishlist!`, 'success');
            }
            
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
            trackUserAction('toggle_wishlist', { productId, productTitle: product.title });
        }

        function setupEventListeners() {
            // Category filtering
            $('.category-btn').click(function(e) {
                e.preventDefault();
                $('.category-btn').removeClass('active');
                $(this).addClass('active');
                
                const category = $(this).data('category');
                filterProducts(category);
                
                // Save user preference
                const preferences = JSON.parse(localStorage.getItem('userPreferences') || '{}');
                preferences.lastCategory = category;
                preferences.lastUpdated = new Date().toISOString();
                localStorage.setItem('userPreferences', JSON.stringify(preferences));
                
                trackUserAction('filter_category', { category });
            });
            
            // Search functionality
            $('#searchBtn, #searchInput').on('click keypress', function(e) {
                if (e.type === 'click' || e.which === 13) {
                    const query = $('#searchInput').val().toLowerCase().trim();
                    if (query) {
                        searchProducts(query);
                        saveSearchHistory(query);
                        trackUserAction('search', { query });
                    }
                }
            });
        }

        function filterProducts(category) {
            const products = JSON.parse(sessionStorage.getItem('products') || '[]');
            
            if (category === 'all') {
                renderProducts(products);
            } else {
                const filteredProducts = products.filter(product => product.category === category);
                renderProducts(filteredProducts);
            }
        }

        function searchProducts(query) {
            const products = JSON.parse(sessionStorage.getItem('products') || '[]');
            const filteredProducts = products.filter(product => 
                product.title.toLowerCase().includes(query) ||
                product.description.toLowerCase().includes(query) ||
                product.category.toLowerCase().includes(query) ||
                product.brand.toLowerCase().includes(query)
            );
            
            renderProducts(filteredProducts);
            
            if (filteredProducts.length === 0) {
                showNotification('Info', `No products found for "${query}"`, 'info');
            } else {
                showNotification('Success', `Found ${filteredProducts.length} products for "${query}"`, 'success');
            }
        }

        function saveSearchHistory(query) {
            const history = JSON.parse(localStorage.getItem('searchHistory') || '[]');
            
            // Remove if already exists to avoid duplicates
            const existingIndex = history.indexOf(query);
            if (existingIndex > -1) {
                history.splice(existingIndex, 1);
            }
            
            // Add to beginning and limit to 10 searches
            history.unshift(query);
            history.splice(10);
            
            localStorage.setItem('searchHistory', JSON.stringify(history));
        }

        function loadUserPreferences() {
            const preferences = JSON.parse(localStorage.getItem('userPreferences') || '{}');
            
            // Apply last selected category if exists
            if (preferences.lastCategory && preferences.lastCategory !== 'all') {
                setTimeout(() => {
                    $(`.category-btn[data-category="${preferences.lastCategory}"]`).click();
                }, 500);
            }
            
            // Update last visited timestamp
            preferences.lastVisited = new Date().toISOString();
            localStorage.setItem('userPreferences', JSON.stringify(preferences));
        }

        function trackPageView() {
            const session = JSON.parse(sessionStorage.getItem('userSession') || '{}');
            session.pageViews = (session.pageViews || 0) + 1;
            session.lastPageView = new Date().toISOString();
            session.currentPage = 'homepage';
            sessionStorage.setItem('userSession', JSON.stringify(session));
        }

        function trackUserAction(action, data = {}) {
            const session = JSON.parse(sessionStorage.getItem('userSession') || '{}');
            
            if (!session.actions) {
                session.actions = [];
            }
            
            session.actions.push({
                action,
                data,
                timestamp: new Date().toISOString(),
                page: 'homepage'
            });
            
            // Keep only last 50 actions to prevent storage bloat
            if (session.actions.length > 50) {
                session.actions = session.actions.slice(-50);
            }
            
            sessionStorage.setItem('userSession', JSON.stringify(session));
        }

        function showNotification(title, message, type = 'info') {
            const toast = new bootstrap.Toast(document.getElementById('liveToast'));
            $('#toastTitle').text(title);
            $('#toastMessage').text(message);
            
            // Add type-specific styling
            const toastElement = $('#liveToast');
            toastElement.removeClass('bg-success bg-danger bg-warning bg-info');
            
            switch(type) {
                case 'success':
                    toastElement.addClass('bg-success text-white');
                    break;
                case 'error':
                    toastElement.addClass('bg-danger text-white');
                    break;
                case 'warning':
                    toastElement.addClass('bg-warning');
                    break;
                default:
                    toastElement.addClass('bg-info text-white');
            }
            
            toast.show();
        }

        // Additional RESTful API simulation for real-time data
        function loadRecommendations() {
            // Simulate API call for personalized recommendations
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/users',
                method: 'GET',
                dataType: 'json',
                success: function(users) {
                    // Use user data to simulate recommendation engine
                    const recommendations = users.slice(0, 3).map((user, index) => ({
                        id: `rec_${user.id}`,
                        title: `Recommended: ${generateAccessoryTitle(index)}`,
                        reason: `Based on your browsing history`,
                        confidence: Math.floor(Math.random() * 30) + 70
                    }));
                    
                    sessionStorage.setItem('recommendations', JSON.stringify(recommendations));
                    console.log('Recommendations loaded:', recommendations);
                },
                error: function() {
                    console.log('Recommendations API unavailable');
                }
            });
        }

        // Initialize recommendations after products load
        setTimeout(loadRecommendations, 2000);

        // Social media integration simulation
        function initializeSocialMedia() {
            // Simulate social media plugin integration
            const socialData = {
                platform: 'facebook',
                pageId: 'acceso.phone.accessories',
                followers: Math.floor(Math.random() * 10000) + 5000,
                lastUpdated: new Date().toISOString()
            };
            
            sessionStorage.setItem('socialMediaData', JSON.stringify(socialData));
            
            // Track social media integration usage
            trackUserAction('social_media_loaded', socialData);
        }

        // Load social media data
        setTimeout(initializeSocialMedia, 1500);

        // Simulate real-time inventory updates
        function updateInventoryStatus() {
            const products = JSON.parse(sessionStorage.getItem('products') || '[]');
            
            products.forEach(product => {
                product.stock = Math.floor(Math.random() * 50) + 1;
                product.lowStock = product.stock < 10;
            });
            
            sessionStorage.setItem('products', JSON.stringify(products));
            
            // Re-render products if needed
            const currentProducts = JSON.parse(sessionStorage.getItem('products') || '[]');
            // Only re-render if user is still on the same page
            if (document.visibilityState === 'visible') {
                console.log('Inventory updated via RESTful API simulation');
            }
        }

        // Simulate periodic inventory updates
        setInterval(updateInventoryStatus, 30000); // Every 30 seconds

        // Cookie consent and preferences
        function initializeCookieConsent() {
            const cookieConsent = localStorage.getItem('cookieConsent');
            
            if (!cookieConsent) {
                // In a real app, show cookie consent banner
                console.log('Cookie consent banner would appear here');
                
                // Simulate user accepting cookies
                setTimeout(() => {
                    localStorage.setItem('cookieConsent', JSON.stringify({
                        accepted: true,
                        timestamp: new Date().toISOString(),
                        preferences: {
                            necessary: true,
                            analytics: true,
                            marketing: false
                        }
                    }));
                    
                    trackUserAction('cookie_consent', { accepted: true });
                }, 3000);
            }
        }

        // Initialize cookie consent
        initializeCookieConsent();

        // Performance tracking
        function trackPerformance() {
            if ('performance' in window) {
                const navigation = performance.getEntriesByType('navigation')[0];
                const performanceData = {
                    loadTime: navigation.loadEventEnd - navigation.loadEventStart,
                    domContentLoaded: navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart,
                    firstPaint: performance.getEntriesByName('first-paint')[0]?.startTime || 0,
                    timestamp: new Date().toISOString()
                };
                
                sessionStorage.setItem('performanceData', JSON.stringify(performanceData));
                trackUserAction('performance_measured', performanceData);
            }
        }

        // Track performance after page load
        window.addEventListener('load', trackPerformance);
    </script>
</body>
</html>